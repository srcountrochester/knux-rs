# Krust (Knex for Rust)

*–ë—ã—Å—Ç—Ä—ã–π –∏ —É–¥–æ–±–Ω—ã–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è Rust —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω–Ω—ã–º Knex.js.*

## –í–≤–µ–¥–µ–Ω–∏–µ

**Krust** ‚Äì —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤ Rust, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∞—è —É–¥–æ–±–Ω—ã–π fluent-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø–æ—Ö–æ–∂–∏–π –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π JavaScript-–ø–∞–∫–µ—Ç Knex. –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ ‚Äì —É–ø—Ä–æ—Å—Ç–∏—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö SQL-–≤—ã—Ä–∞–∂–µ–Ω–∏–π, —Å–æ—Ö—Ä–∞–Ω—è—è –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –∑–∞–ø—Ä–æ—Å–∞–º–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–±–µ–∑ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ ORM). Krust **–Ω–µ —è–≤–ª—è–µ—Ç—Å—è ORM**, —Ç–æ –µ—Å—Ç—å –æ–Ω –Ω–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–æ–≤ –∏ –Ω–µ –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –º–æ–¥–µ–ª—è–º ‚Äì –≤—ã –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä—É–µ—Ç–µ SQL-–∑–∞–ø—Ä–æ—Å—ã, –∞ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é **SQLx**). –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –¥–∞—ë—Ç –≥–∏–±–∫–æ—Å—Ç—å: –≤—ã –ø–∏—à–µ—Ç–µ –∑–∞–ø—Ä–æ—Å—ã, –±–ª–∏–∑–∫–∏–µ –∫ —á–∏—Å—Ç–æ–º—É SQL, –Ω–æ –ø–æ–ª—å–∑—É–µ—Ç–µ—Å—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º API –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è SQL-–∏–Ω—ä–µ–∫—Ü–∏–π –∏ —É–¥–æ–±–Ω–æ–≥–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —É—Å–ª–æ–≤–∏–π.

Krust –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ SQL-–¥–∏–∞–ª–µ–∫—Ç–æ–≤. –ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –¥–æ—Å—Ç—É–ø–Ω—ã SQLite, PostgreSQL –∏ MySQL ‚Äì –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SQLite (—á–µ—Ä–µ–∑ feature-—Ñ–ª–∞–≥ `sqlite`), –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∏ –¥—Ä—É–≥–∏–µ –°–£–ë–î, —É–∫–∞–∑–∞–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ feature-—Ñ–ª–∞–≥–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `tokio` –∏ `sqlx`), –ø–æ—ç—Ç–æ–º—É –≤—ã —Å–º–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º —Å –ø–æ–º–æ—â—å—é `async/await`.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–æ–±–∞–≤—å—Ç–µ Krust –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ **Cargo.toml**. –ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å Krust —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π SQLite (–≤–∫–ª—é—á–µ–Ω–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

```toml
[dependencies]
krust = "0.1.0"
```

–ï—Å–ª–∏ –≤—ã –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL –∏–ª–∏ MySQL, —É–∫–∞–∂–∏—Ç–µ –Ω—É–∂–Ω—ã–µ —Ñ–∏—á–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è PostgreSQL:

```toml
[dependencies]
krust = { version = "0.1.0", default-features = false, features = ["postgres"] }
```
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è MySQL: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `features = ["mysql"]`. –í—ã –º–æ–∂–µ—Ç–µ –≤–∫–ª—é—á–∏—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–∏–∞–ª–µ–∫—Ç–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–∞–Ω—Ç–∞–π–º **Tokio**, —Ç–∞–∫ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

## –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —à–∞–≥–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —Å –ø–æ–º–æ—â—å—é Krust:

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.** –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–æ–≤. –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —É–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑–º–µ—Ä –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π):

    ```rust
    use krust::executor::{ExecutorConfig, QueryExecutor};

    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (SQLite –≤ –ø–∞–º—è—Ç–∏, 1 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ)
    let cfg = ExecutorConfig::builder()
        .database_url("sqlite::memory:")
        .max_connections(1)
        .build();
    // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∞–µ–º –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–æ–≤
    let db = QueryExecutor::connect(cfg).await.unwrap();
    ```

2. **–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ SQL-–∑–∞–ø—Ä–æ—Å–∞.** –° –ø–æ–º–æ—â—å—é –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è `db` —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∞ –∏ —Ü–µ–ø–æ—á–∫–æ–π –º–µ—Ç–æ–¥–æ–≤ –∑–∞–¥–∞—ë–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —á–∞—Å—Ç–∏ SQL. –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –º—ã –≤—ã–±–µ—Ä–µ–º –≤—Å–µ –ø–æ–ª—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `users` –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–º –∫ –Ω–µ–π –ø–æ–¥–∑–∞–ø—Ä–æ—Å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `accounts`:

    ```rust
    use krust::expression::helpers::{col, val};

    // –ù–∞—á–∏–Ω–∞–µ–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å: –≤—ã–±–∏—Ä–∞–µ–º * –∏–∑ public.users
    let users_query = db
        .query()                      // –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
        .schema("public")             // —É–∫–∞–∑—ã–≤–∞–µ–º —Å—Ö–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è Postgres)
        .from("users")                // –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ users
        .select("*")                  // –≤—ã–±—Ä–∞—Ç—å –≤—Å–µ —Å—Ç–æ–ª–±—Ü—ã
        // –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º –ø–æ–¥–∑–∞–ø—Ä–æ—Å: SELECT * FROM accounts WHERE user_id = 1
        .join(
            |qb| qb.from("accounts").select("*").r#where(col("user_id").eq(val(1))),
            "users.id = accounts.user_id"
        );
    ```
    –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –º–µ—Ç–æ–¥ `.join()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–º—ã–∫–∞–Ω–∏–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å—Ç—Ä–æ–∏—Ç—Å—è –ø–æ–¥–∑–∞–ø—Ä–æ—Å (`qb` ‚Äì –Ω–æ–≤—ã–π `QueryBuilder` –¥–ª—è –ø–æ–¥–∑–∞–ø—Ä–æ—Å–∞), –∏ —É—Å–ª–æ–≤–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º—ã —Å–æ–µ–¥–∏–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏, –≥–¥–µ `accounts.user_id = users.id`, –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–¥–∑–∞–ø—Ä–æ—Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —É—Å–ª–æ–≤–∏–µ–º `user_id = 1`. –ú–µ—Ç–æ–¥—É `.r#where `–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å `r#` –ø–æ—Ç–æ–º—É, —á—Ç–æ `where` —è–≤–ª—è–µ—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º –≤ Rust.

3. **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ SQL-—Å—Ç—Ä–æ–∫–∏.** –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∑–∞–ø—Ä–æ—Å –ø–æ—Å—Ç—Ä–æ–µ–Ω, –µ–≥–æ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (–ø–æ–ª—É—á–∏–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã) –∏–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å SQL –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏/–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:
    - **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞:**
    ```rust
    let users: Vec<User> = users_query.await.unwrap();
    ```
    –ö–æ–≥–¥–∞ –≤—ã –æ–∂–∏–¥–∞–µ—Ç–µ (`.await`) –æ–±—ä–µ–∫—Ç –∑–∞–ø—Ä–æ—Å–∞, Krust –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π SQL —á–µ—Ä–µ–∑ –ø—É–ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π **SQLx**. –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `users` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–±–æ—Ä —Å—Ç—Ä–æ–∫ –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `users` —Å –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—ë–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏). –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –¢–∏–ø —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Äì –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å —Å—ã—Ä—ã–µ —Å—Ç—Ä–æ–∫–∏ (`sqlx::Row`) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ SQLx –¥–ª—è –º–∞–ø–ø–∏–Ω–≥–∞ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

    - **–ü–æ–ª—É—á–µ–Ω–∏–µ SQL –±–µ–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**
    ```rust
    let (sql, params) = users_query.to_sql();
    ```
    –ú–µ—Ç–æ–¥ `.to_sql()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π SQL-–∑–∞–ø—Ä–æ—Å –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ –∏ —Å–ø–∏—Å–æ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –í –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ `sql` –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º:
    ```sql
    SELECT * FROM public.users 
    JOIN (SELECT * FROM accounts WHERE user_id = ?) AS _t1 
    ON users.id = accounts.user_id;
    ```
    –ê `params` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–∑–¥–µ—Å—å –¥–ª—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞ `?` –±—É–¥–µ—Ç `[1]`). –≠—Ç–æ—Ç —Å–ø–æ—Å–æ–± —É–¥–æ–±–µ–Ω –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ ‚Äì –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫–æ–π SQL —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª—Å—è, –Ω–µ –≤—ã–ø–æ–ª–Ω—è—è –µ–≥–æ.

## –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
Krust –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è –ø–æ—ç—Ç–∞–ø–Ω–æ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏—è SQL-–∑–∞–ø—Ä–æ—Å–∞. –í—Å–µ –æ–Ω–∏ –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —Ü–µ–ø–æ—á–∫–æ–π (`builder.method1(...).method2(...).method3(...)`), —Ñ–æ—Ä–º–∏—Ä—É—è –∑–∞–ø—Ä–æ—Å —à–∞–≥ –∑–∞ —à–∞–≥–æ–º:

- `query().from(table)` ‚Äì –≤—ã–±—Ä–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—É—é —Ç–∞–±–ª–∏—Ü—É (–∏–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å) –¥–ª—è SELECT. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã (`&str`) –ª–∏–±–æ –∑–∞–º—ã–∫–∞–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–µ –ø–æ–¥–∑–∞–ø—Ä–æ—Å `QueryBuilder` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–¥–∑–∞–ø—Ä–æ—Å –≤ —Å–µ–∫—Ü–∏–∏ FROM). –ú–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –¥–ª—è –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (–±—É–¥—É—Ç –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é).

- `schema(name)` ‚Äì —É–∫–∞–∑–∞—Ç—å —Å—Ö–µ–º—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã. –ï—Å–ª–∏ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤—ã–∑–≤–∞–Ω –ø–µ—Ä–µ–¥ `.from()`, —Ç–æ —É–∫–∞–∑–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –±—É–¥–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –∫ –∏–º–µ–Ω–∏ —Ç–∞–±–ª–∏—Ü—ã. –ù–∞–ø—Ä–∏–º–µ—Ä, `.schema("public").from("users")` —Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `FROM public.users`.

- `select(columns)` ‚Äì —É–∫–∞–∑–∞—Ç—å, –∫–∞–∫–∏–µ —Å—Ç–æ–ª–±—Ü—ã –∏–ª–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤—ã–±–∏—Ä–∞—Ç—å. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –∏–º—è —Å—Ç–æ–ª–±—Ü–∞, `"*"` –¥–ª—è –≤—Å–µ—Ö —Å—Ç–æ–ª–±—Ü–æ–≤, —Å–ø–∏—Å–æ–∫ –∫–æ—Ä—Ç–µ–∂–µ–º/–º–∞—Å—Å–∏–≤–æ–º, –∞ —Ç–∞–∫–∂–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è (`Expression`). –ù–∞–ø—Ä–∏–º–µ—Ä: `.select(("id", "name"))` –≤—ã–±–µ—Ä–µ—Ç –¥–≤–∞ —Å—Ç–æ–ª–±—Ü–∞, –∞ `.select(col("id").count().alias("count"))` ‚Äì –∞–≥—Ä–µ–≥–∞—Ç–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ. –ï—Å–ª–∏ –≤—ã –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç–µ `select`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±—É–¥–µ—Ç –≤—ã–±—Ä–∞–Ω `SELECT *`.

- `join(target, on)` ‚Äì –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ (JOIN) —Å –¥—Ä—É–≥–æ–π —Ç–∞–±–ª–∏—Ü–µ–π –∏–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–º. –ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äì –ª–∏–±–æ –∏–º—è —Ç–∞–±–ª–∏—Ü—ã (`&str`), –ª–∏–±–æ –∑–∞–º—ã–∫–∞–Ω–∏–µ —Å –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–º (–∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ). –í—Ç–æ—Ä–æ–π –∞—Ä–≥—É–º–µ–Ω—Ç ‚Äì —É—Å–ª–æ–≤–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (ON) –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ –∏–ª–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è INNER JOIN. (–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ; –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã (LEFT, RIGHT –∏ –ø—Ä.) –º–æ–≥—É—Ç –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –±—É–¥—É—â–µ–º.) –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å `.join()` –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö JOIN.

- `where(condition)` ‚Äì –∑–∞–¥–∞—Ç—å —É—Å–ª–æ–≤–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞ (WHERE). –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç `Expression`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Å–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é DSL –≤—ã—Ä–∞–∂–µ–Ω–∏–π (—Å–º. —Ä–∞–∑–¥–µ–ª **‚Äú–í—ã—Ä–∞–∂–µ–Ω–∏—è‚Äù** –Ω–∏–∂–µ). –ï—Å–ª–∏ –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ `.where()` –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑, —É—Å–ª–æ–≤–∏—è –±—É–¥—É—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ AND (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏—é Knex). –î–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Å OR –∏–ª–∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –≥—Ä—É–ø–ø–∏—Ä–æ–≤–æ–∫ ‚Äì —Ñ–æ—Ä–º–∏—Ä—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∑–∞—Ä–∞–Ω–µ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è `.and/.or` –Ω–∞ —É—Ä–æ–≤–Ω–µ `Expression`).

- `alias(name)` ‚Äì –∑–∞–¥–∞—Ç—å –ø—Å–µ–≤–¥–æ–Ω–∏–º –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –µ—Å–ª–∏ –æ–Ω –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –ø–æ–¥–∑–∞–ø—Ä–æ—Å. –ù–∞–ø—Ä–∏–º–µ—Ä: `db.query().from("users").alias("u")` —Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç FROM users AS u. –û–±—ã—á–Ω–æ —ç—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –∏–ª–∏ —Å–∞–º–æ—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è—Ö. (–î–ª—è –≤—ã—Ä–∞–∂–µ–Ω–∏–π alias —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ ‚Äì –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å –∏–º—è —Å—Ç–æ–ª–±—Ü–∞ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ).

- `to_sql()` ‚Äì —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å SQL-—Å—Ç—Ä–æ–∫—É –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–µ–∫—É—â–µ–º—É –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º—É –∑–∞–ø—Ä–æ—Å—É, –±–µ–∑ –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.

–ö—Ä–æ–º–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö, Krust –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –¥—Ä—É–≥–∏—Ö –º–µ—Ç–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, LIMIT, ORDER BY, GROUP BY –∏ –ø—Ä.). –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (0.1.0) –æ—Å–Ω–æ–≤–Ω–æ–π —É–ø–æ—Ä —Å–¥–µ–ª–∞–Ω –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é SELECT-–∑–∞–ø—Ä–æ—Å–æ–≤.

## –í—ã—Ä–∞–∂–µ–Ω–∏—è (DSL –¥–ª—è —É—Å–ª–æ–≤–∏–π –∏ –ø–æ–ª–µ–π)
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ Krust –≤–∫–ª—é—á–∞–µ—Ç –º–æ–¥—É–ª—å `expression`, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π —É–¥–æ–±–Ω—ã–π DSL –¥–ª—è –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π (—É—Å–ª–æ–≤–∏–π, –≤—ã—á–∏—Å–ª–µ–Ω–∏–π, –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –∏ –ø—Ä.). –≠—Ç–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –º–µ—Ç–æ–¥–∞—Ö –∑–∞–ø—Ä–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ `.where()` –∏–ª–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ `.select()` –∏ `.join()`). –ù–∏–∂–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ DSL –≤—ã—Ä–∞–∂–µ–Ω–∏–π:
- **–ö–æ–ª–æ–Ω–∫–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è:** –§—É–Ω–∫—Ü–∏—è `col("table.column")` —Å–æ–∑–¥–∞—ë—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ-—Å—Ç–æ–ª–±–µ—Ü (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º —Ç–∞–±–ª–∏—Ü—ã —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ –∏–º—è —Å—Ç–æ–ª–±—Ü–∞). –§—É–Ω–∫—Ü–∏—è `val(value)` —Å–æ–∑–¥–∞—ë—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–Ω–∞—á–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, `col("age")` –∏ `val(18)`. –í—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è, –æ–±—ë—Ä–Ω—É—Ç—ã–µ —á–µ—Ä–µ–∑ `val`, –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∑–∞–ø—Ä–æ—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ (–ø–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∫ `?` –∏–ª–∏ `$1` –∏ —Ç.–¥. –≤ SQL), —á—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä—è–º–æ –≤—Å—Ç–∞–≤–∏—Ç—å –ª–∏—Ç–µ—Ä–∞–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–æ–∫—É) –≤ –∑–∞–ø—Ä–æ—Å, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `lit("TEXT")`, –Ω–æ –¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–ª–µ–¥—É–µ—Ç –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ (–≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –ª—É—á—à–µ `val`).

- **–°—Ä–∞–≤–Ω–µ–Ω–∏—è:** –ú–µ—Ç–æ–¥–∞–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è: `.eq`, `.ne` (–Ω–µ —Ä–∞–≤–Ω–æ), `.gt` (–±–æ–ª—å—à–µ), `.lt` (–º–µ–Ω—å—à–µ), `.gte/.lte` (–±–æ–ª—å—à–µ –ª–∏–±–æ —Ä–∞–≤–Ω–æ / –º–µ–Ω—å—à–µ –ª–∏–±–æ —Ä–∞–≤–Ω–æ). –ö–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Ç–∏–ø–∞ `Expression`, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –¥–∞–ª—å—à–µ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å. –ü—Ä–∏–º–µ—Ä: `col("age").gt(val(18))` —Å–æ–∑–¥–∞—Å—Ç —É—Å–ª–æ–≤–∏–µ `age > 18`.

- **–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:** –ï—Å—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —É—Å–ª–æ–≤–∏–π: `.and()` –∏ `.or()`. –û–Ω–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –¥—Ä—É–≥–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ. –ù–∞–ø—Ä–∏–º–µ—Ä:
    ```rust
    // age > 18 AND active = true
    let condition = col("age").gt(val(18))
        .and(col("active").eq(val(true)));
    ```
    –ü–æ–ª—É—á–µ–Ω–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ condition –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤ `.where(condition)` –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—è –∑–∞–ø—Ä–æ—Å–∞. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, `.or` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ OR. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å–ª–æ–≤–∏–π, –≤—ã–∑—ã–≤–∞—è —ç—Ç–∏ –º–µ—Ç–æ–¥—ã –∫–∞—Å–∫–∞–¥–Ω–æ.

- **–°–ø–∏—Å–∫–∏ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞:** –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Ö–æ–∂–¥–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –≤ –Ω–∞–±–æ—Ä –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–µ—Ç–æ–¥—ã `.in_list()` –∏ `.not_in_list()`. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏–µ IN (...) –∏–ª–∏ NOT IN (...). –ù–∞–ø—Ä–∏–º–µ—Ä:
    ```rust
    // country IN ('US','UK')
    let countries = vec![val("US"), val("UK")];
    let expr = col("country").in_list(countries);
    ```
    –≠—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —É—Å–ª–æ–≤–∏—é `country IN (?, ?)`, —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `["US", "UK"]`. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, `.not_in_list` –∑–∞–¥–∞—ë—Ç –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ —ç—Ç–æ–≥–æ —É—Å–ª–æ–≤–∏—è.

- **–ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:** –í—ã –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è. –î–ª—è –ª—é–±–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Ç–∏–ø–∞ Expression –¥–æ—Å—Ç—É–ø–Ω—ã –º–µ—Ç–æ–¥—ã –∞–≥—Ä–µ–≥–∞—Ç–æ–≤: `.count()`, `.sum()`, `.avg()`, `.min()`, `.max()`. –û–Ω–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –Ω–æ–≤–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–µ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é SQL-—Ñ—É–Ω–∫—Ü–∏—é. –ù–∞–ø—Ä–∏–º–µ—Ä, `col("id").count()` ‚Äì —ç—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ `COUNT(id)`. –¢–∞–∫–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ `.select()`, —á–∞—Å—Ç–æ –≤–º–µ—Å—Ç–µ —Å `.alias()`, —á—Ç–æ–±—ã –∑–∞–¥–∞—Ç—å –∏–º—è —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–≥–æ —Å—Ç–æ–ª–±—Ü–∞:
    ```rust
    // SELECT COUNT(id) AS user_count FROM users
    let count_expr = col("id").count().alias("user_count");
    let result = db.query().from("users").select(count_expr).await?;
    ```
    –¢–∞–∫–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `DISTINCT` –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤: –µ—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å `.distinct()` –ø–µ—Ä–µ–¥ –∞–≥—Ä–µ–≥–∞—Ç–æ–º, –±—É–¥–µ—Ç –ø–æ–¥—Å—á–∏—Ç–∞–Ω–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –ü—Ä–∏–º–µ—Ä: `col("country").distinct().count()` —Å—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç `COUNT(DISTINCT country)`.

- **–ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –∏ –¥—Ä—É–≥–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:** DSL –≤—ã—Ä–∞–∂–µ–Ω–∏–π –≤–∫–ª—é—á–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: `.add()`, `.sub()`, `.mul()`, `.div()` ‚Äì –¥–ª—è —Å–ª–æ–∂–µ–Ω–∏—è, –≤—ã—á–∏—Ç–∞–Ω–∏—è, —É–º–Ω–æ–∂–µ–Ω–∏—è –∏ –¥–µ–ª–µ–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ (–æ–Ω–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç `+`, `-`, `*`, `/` –≤ SQL). –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –¥–æ—Å—Ç—É–ø–Ω—ã –º–µ—Ç–æ–¥—ã `.neg()` (—É–Ω–∞—Ä–Ω—ã–π –º–∏–Ω—É—Å) –∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥—Ä—É–≥–∏–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏. –î–ª—è –ª—é–±—ã—Ö —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `raw()`, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Ä—É—á–Ω—É—é –≤—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –≤ AST (–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–µ –¥–µ—Ä–µ–≤–æ) SQL. `raw` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–º—ã–∫–∞–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–µ–µ `sqlparser::ast::Expr` ‚Äì —ç—Ç–æ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –≤ DSL –ø–æ–∫–∞ –Ω–µ—Ç –Ω—É–∂–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏. –í –ø—Ä–æ—Å—Ç—ã—Ö —Å–ª—É—á–∞—è—Ö —É–¥–æ–±–Ω–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `lit` –∏–ª–∏ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤.

–í—Å–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Ç–∏–ø–∞ `Expression` –±–µ–∑–æ–ø–∞—Å–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä—É—é—Ç—Å—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏: –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `val()`, –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Å–ø–∏—Å–∫–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π SQL –±–µ–∑ —Ä—É—á–Ω–æ–π –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ —Å—Ç—Ä–æ–∫.

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏ –ø–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è
Krust (–≤–µ—Ä—Å–∏—è 0.1.0) ‚Äì –º–æ–ª–æ–¥–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –Ω–∞—Ö–æ–¥—è—â–∞—è—Å—è –≤ —Å—Ç–∞–¥–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –û–Ω–∞ —É–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç—Ä–æ–∏—Ç—å —Å–ª–æ–∂–Ω—ã–µ SELECT-–∑–∞–ø—Ä–æ—Å—ã, –æ–±–ª–µ–≥—á–∞—è —Ä–∞–±–æ—Ç—É —Å SQL –≤ Rust-–ø—Ä–æ–µ–∫—Ç–∞—Ö. –í –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –≤–µ—Ä—Å–∏—è—Ö –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤ (INSERT/UPDATE/DELETE), –º–µ—Ç–æ–¥–æ–≤ –¥–ª—è LIMIT/OFFSET, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ORDER BY/GROUP BY, —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã JOIN (LEFT, RIGHT, CROSS) –∏ –ø—Ä–æ—á–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —Å–≤–æ–π—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª–µ–º –∑–∞–ø—Ä–æ—Å–æ–≤ SQL.

–ú—ã –±—É–¥–µ–º —Ä–∞–¥—ã –ª—é–±–æ–º—É –æ—Ç–∫–ª–∏–∫—É –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º –æ—Ç —Å–æ–æ–±—â–µ—Å—Ç–≤–∞! –í—ã –º–æ–∂–µ—Ç–µ –æ—Å—Ç–∞–≤–ª—è—Ç—å –æ—Ç–∑—ã–≤—ã, —Å–æ–æ–±—â–∞—Ç—å –æ–± –æ—à–∏–±–∫–∞—Ö –∏ –≤–Ω–æ—Å–∏—Ç—å —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞.

## –í–Ω–µ—Å–µ–Ω–∏–µ –≤–∫–ª–∞–¥–∞
Contributions –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è. –ï—Å–ª–∏ –≤—ã –Ω–∞—à–ª–∏ –±–∞–≥ –∏–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ issue –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ pull request –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –û–±—Å—É–∂–¥–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ —É–ª—É—á—à–µ–Ω–∏–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤—Å–µ–≥–¥–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è. –í–º–µ—Å—Ç–µ –º—ã —Å–º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å Krust –ª—É—á—à–µ! üöÄ

## –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —É—Å–ª–æ–≤–∏—è—Ö —Å–≤–æ–±–æ–¥–Ω–æ–π –æ—Ç–∫—Ä—ã—Ç–æ–π –ª–∏—Ü–µ–Ω–∑–∏–∏. –í—ã —Å–≤–æ–±–æ–¥–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Krust –≤ —Å–≤–æ–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö. (*–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –ª–∏—Ü–µ–Ω–∑–∏—è –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏; –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ–π –ª–∏—Ü–µ–Ω–∑–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä MIT.*)